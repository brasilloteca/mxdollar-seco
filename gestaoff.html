<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controle de Apostas</title>
<style>
body { font-family: Arial, sans-serif; padding: 10px; background:#f2f2f2; }
.container { max-width: 420px; margin:auto; background:white; padding:10px; border-radius:8px; }
h2 { text-align:center; margin:5px 0; }
label { font-size:12px; font-weight:bold; }
input, button {
  width:100%;
  padding:6px;
  font-size:12px;
  margin:4px 0;
  border-radius:5px;
  border:1px solid #ccc;
}
button { background:#222; color:white; border:none; }
button.green { background:#1a8f3a; }
button.red { background:#b52b27; }
.small { font-size:11px; }
table { width:100%; font-size:11px; border-collapse: collapse; margin-top:6px;}
td, th { border:1px solid #ccc; padding:4px; text-align:center; }
.greenRow { background:#d9f5df; }
.redRow { background:#f8d7da; }
</style>
</head>
<body>
<div class="container">
<h2>Controle de Apostas</h2>

<label>Banca atual</label>
<input type="number" id="bank" value="100">

<label>Valor da aposta</label>
<input type="number" id="bet">

<label>Odd</label>
<input type="number" step="0.01" id="odd" value="2.00">

<button onclick="criarAposta()">Criar aposta</button>

<div id="pendente" class="small"></div>

<button class="green" onclick="resultado('GREEN')">GREEN</button>
<button class="red" onclick="resultado('RED')">RED</button>

<h3>Histórico</h3>
<table>
<thead>
<tr><th>Jogo</th><th>Aposta</th><th>Odd</th><th>Res</th><th>Banca</th></tr>
</thead>
<tbody id="historico"></tbody>
</table>
</div>

<script>
let estado = JSON.parse(localStorage.getItem('apostaEstado')) || {
  bank: 100,
  pendente: null,
  historico: []
};

const bankInput = document.getElementById('bank');
const betInput = document.getElementById('bet');
const oddInput = document.getElementById('odd');
const pendenteDiv = document.getElementById('pendente');
const historicoBody = document.getElementById('historico');

function salvar() {
  localStorage.setItem('apostaEstado', JSON.stringify(estado));
  render();
}

function render() {
  bankInput.value = estado.bank.toFixed(2);
  pendenteDiv.innerHTML = estado.pendente 
    ? `Aposta pendente: ${estado.pendente.valor} @ ${estado.pendente.odd}` 
    : "Nenhuma aposta pendente.";
  
  historicoBody.innerHTML = "";
  estado.historico.forEach(h => {
    const tr = document.createElement("tr");
    tr.className = h.res === 'GREEN' ? 'greenRow' : 'redRow';
    tr.innerHTML = `<td>${h.jogo}</td><td>${h.valor}</td><td>${h.odd}</td><td>${h.res}</td><td>${h.bank}</td>`;
    historicoBody.appendChild(tr);
  });
}

function criarAposta() {
  if (estado.pendente) {
    alert("Finalize a aposta atual primeiro.");
    return;
  }

  const valor = parseFloat(betInput.value);
  const odd = parseFloat(oddInput.value);

  if (isNaN(valor) || isNaN(odd) || valor <= 0 || odd <= 1) {
    alert("Preencha valor e odd corretamente.");
    return;
  }

  estado.pendente = {
    jogo: "Aposta " + (estado.historico.length + 1),
    valor,
    odd
  };

  salvar();
}

function resultado(res) {
  if (!estado.pendente) {
    alert("Não há aposta pendente.");
    return;
  }

  const { valor, odd } = estado.pendente;

  if (res === "GREEN") {
    estado.bank += valor * (odd - 1);
  } else {
    estado.bank -= valor;
  }

  estado.historico.unshift({
    jogo: estado.pendente.jogo,
    valor,
    odd,
    res,
    bank: estado.bank.toFixed(2)
  });

  estado.pendente = null;
  salvar();
}

render();
</script>
</body>
</html>
